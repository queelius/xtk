"""
Algebraic manipulation rules.
"""

# Rules for simplifying expressions
simplify_rules = [
    # Identity rules
    [["+", ["?", "x"], 0], [":", "x"]],
    [["+", 0, ["?", "x"]], [":", "x"]],
    [["*", ["?", "x"], 1], [":", "x"]],
    [["*", 1, ["?", "x"]], [":", "x"]],
    [["*", ["?", "x"], 0], 0],
    [["*", 0, ["?", "x"]], 0],
    [["/", ["?", "x"], 1], [":", "x"]],
    [["/", 0, ["?", "x"]], 0],
    [["^", ["?", "x"], 1], [":", "x"]],
    [["^", ["?", "x"], 0], 1],
    [["^", 1, ["?", "x"]], 1],
    [["^", 0, ["?", "x"]], 0],  # Assuming x != 0
    
    # Double negative
    [["-", 0, ["-", 0, ["?", "x"]]], [":", "x"]],
    
    # Subtraction as addition
    [["-", ["?", "x"], ["?", "y"]], ["+", [":", "x"], ["-", 0, [":", "y"]]]],
    
    # Combine like terms
    [["+", ["*", ["?c", "a"], ["?", "x"]], ["*", ["?c", "b"], ["?", "x"]]],
     ["*", ["+", [":", "a"], [":", "b"]], [":", "x"]]],
    
    # Distributive property
    [["*", ["?", "a"], ["+", ["?", "x"], ["?", "y"]]],
     ["+", ["*", [":", "a"], [":", "x"]], ["*", [":", "a"], [":", "y"]]]],
    
    [["*", ["+", ["?", "x"], ["?", "y"]], ["?", "a"]],
     ["+", ["*", [":", "x"], [":", "a"]], ["*", [":", "y"], [":", "a"]]]],
    
    # Associativity of addition
    [["+", ["+", ["?", "x"], ["?", "y"]], ["?", "z"]],
     ["+", [":", "x"], ["+", [":", "y"], [":", "z"]]]],
    
    # Associativity of multiplication
    [["*", ["*", ["?", "x"], ["?", "y"]], ["?", "z"]],
     ["*", [":", "x"], ["*", [":", "y"], [":", "z"]]]],
    
    # Power rules
    [["^", ["^", ["?", "x"], ["?", "a"]], ["?", "b"]],
     ["^", [":", "x"], ["*", [":", "a"], [":", "b"]]]],
    
    [["*", ["^", ["?", "x"], ["?", "a"]], ["^", ["?", "x"], ["?", "b"]]],
     ["^", [":", "x"], ["+", [":", "a"], [":", "b"]]]],
    
    [["/", ["^", ["?", "x"], ["?", "a"]], ["^", ["?", "x"], ["?", "b"]]],
     ["^", [":", "x"], ["-", [":", "a"], [":", "b"]]]],
    
    # Fraction simplification
    [["/", ["*", ["?", "a"], ["?", "x"]], ["*", ["?", "b"], ["?", "x"]]],
     ["/", [":", "a"], [":", "b"]]],
    
    # Square root
    [["sqrt", ["^", ["?", "x"], 2]], [":", "x"]],  # Assuming x >= 0
    [["^", ["sqrt", ["?", "x"]], 2], [":", "x"]],
]

# Rules for expanding expressions
expand_rules = [
    # Distributive property
    [["*", ["?", "a"], ["+", ["?", "x"], ["?", "y"]]],
     ["+", ["*", [":", "a"], [":", "x"]], ["*", [":", "a"], [":", "y"]]]],
    
    [["*", ["+", ["?", "x"], ["?", "y"]], ["?", "a"]],
     ["+", ["*", [":", "x"], [":", "a"]], ["*", [":", "y"], [":", "a"]]]],
    
    # FOIL for binomials
    [["*", ["+", ["?", "a"], ["?", "b"]], ["+", ["?", "c"], ["?", "d"]]],
     ["+", ["+", ["+", ["*", [":", "a"], [":", "c"]], 
                       ["*", [":", "a"], [":", "d"]]], 
                       ["*", [":", "b"], [":", "c"]]], 
                       ["*", [":", "b"], [":", "d"]]]],
    
    # Square of a binomial
    [["^", ["+", ["?", "a"], ["?", "b"]], 2],
     ["+", ["+", ["^", [":", "a"], 2], 
                 ["*", 2, ["*", [":", "a"], [":", "b"]]]], 
                 ["^", [":", "b"], 2]]],
    
    [["^", ["-", ["?", "a"], ["?", "b"]], 2],
     ["+", ["-", ["^", [":", "a"], 2], 
                 ["*", 2, ["*", [":", "a"], [":", "b"]]]], 
                 ["^", [":", "b"], 2]]],
    
    # Cube of a binomial
    [["^", ["+", ["?", "a"], ["?", "b"]], 3],
     ["+", ["+", ["+", ["^", [":", "a"], 3], 
                       ["*", 3, ["*", ["^", [":", "a"], 2], [":", "b"]]]], 
                       ["*", 3, ["*", [":", "a"], ["^", [":", "b"], 2]]]], 
                       ["^", [":", "b"], 3]]],
]

# Rules for factoring expressions
factor_rules = [
    # Common factor
    [["+", ["*", ["?", "a"], ["?", "x"]], ["*", ["?", "a"], ["?", "y"]]],
     ["*", [":", "a"], ["+", [":", "x"], [":", "y"]]]],
    
    # Difference of squares
    [["-", ["^", ["?", "a"], 2], ["^", ["?", "b"], 2]],
     ["*", ["+", [":", "a"], [":", "b"]], ["-", [":", "a"], [":", "b"]]]],
    
    # Perfect square trinomial
    [["+", ["+", ["^", ["?", "a"], 2], ["*", 2, ["*", ["?", "a"], ["?", "b"]]]], 
           ["^", ["?", "b"], 2]],
     ["^", ["+", [":", "a"], [":", "b"]], 2]],
    
    [["+", ["-", ["^", ["?", "a"], 2], ["*", 2, ["*", ["?", "a"], ["?", "b"]]]], 
           ["^", ["?", "b"], 2]],
     ["^", ["-", [":", "a"], [":", "b"]], 2]],
    
    # Sum of cubes
    [["+", ["^", ["?", "a"], 3], ["^", ["?", "b"], 3]],
     ["*", ["+", [":", "a"], [":", "b"]], 
           ["+", ["-", ["^", [":", "a"], 2], 
                       ["*", [":", "a"], [":", "b"]]], 
                       ["^", [":", "b"], 2]]]],
    
    # Difference of cubes
    [["-", ["^", ["?", "a"], 3], ["^", ["?", "b"], 3]],
     ["*", ["-", [":", "a"], [":", "b"]], 
           ["+", ["+", ["^", [":", "a"], 2], 
                       ["*", [":", "a"], [":", "b"]]], 
                       ["^", [":", "b"], 2]]]],
]