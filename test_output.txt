test_main_interactive_flag (test_cli.TestMainFunction.test_main_interactive_flag)
Test main with -i flag starts REPL. ... ok
test_main_no_args_starts_repl (test_cli.TestMainFunction.test_main_no_args_starts_repl)
Test main with no args starts REPL. ... ok
test_main_with_differentiate (test_cli.TestMainFunction.test_main_with_differentiate)
Test main with differentiate flag. ... ok
test_main_with_evaluate (test_cli.TestMainFunction.test_main_with_evaluate)
Test main with evaluate flag. ... ok
test_main_with_invalid_expression (test_cli.TestMainFunction.test_main_with_invalid_expression)
Test main with invalid expression. ... ok
test_main_with_latex_format (test_cli.TestMainFunction.test_main_with_latex_format)
Test main with LaTeX format. ... ok
test_main_with_sexpr (test_cli.TestMainFunction.test_main_with_sexpr)
Test main with S-expression. ... ok
test_main_with_simplify (test_cli.TestMainFunction.test_main_with_simplify)
Test main with simplify flag. ... ok
test_main_with_tree_format (test_cli.TestMainFunction.test_main_with_tree_format)
Test main with tree format. ... ok
test_complete_commands (test_cli.TestXTKReplComplete.test_complete_commands)
Test command completion. ... FAIL
test_complete_empty_string (test_cli.TestXTKReplComplete.test_complete_empty_string)
Test completion with empty string. ... ok
test_complete_with_variables (test_cli.TestXTKReplComplete.test_complete_with_variables)
Test completion includes variables. ... ok
test_initialization (test_cli.TestXTKReplInit.test_initialization)
Test REPL initialization. ... ok
test_list_rules_empty (test_cli.TestXTKReplMethods.test_list_rules_empty)
Test list_rules with no rules. ... ok
test_list_rules_with_rules (test_cli.TestXTKReplMethods.test_list_rules_with_rules)
Test list_rules with rules. ... FAIL
test_rewrite_last_no_history (test_cli.TestXTKReplMethods.test_rewrite_last_no_history)
Test rewrite_last with no history. ... ok
test_rewrite_last_with_history (test_cli.TestXTKReplMethods.test_rewrite_last_with_history)
Test rewrite_last with history. ... ok
test_set_variable_sexpr (test_cli.TestXTKReplMethods.test_set_variable_sexpr)
Test setting variable with S-expression. ... ok
test_show_help (test_cli.TestXTKReplMethods.test_show_help)
Test show_help method. ... ok
test_show_history_empty (test_cli.TestXTKReplMethods.test_show_history_empty)
Test show_history with no history. ... ok
test_show_history_with_items (test_cli.TestXTKReplMethods.test_show_history_with_items)
Test show_history with items. ... ok
test_show_latex_no_history (test_cli.TestXTKReplMethods.test_show_latex_no_history)
Test show_latex with no history. ... ok
test_show_variables_empty (test_cli.TestXTKReplMethods.test_show_variables_empty)
Test show_variables with no variables. ... ok
test_show_variables_with_items (test_cli.TestXTKReplMethods.test_show_variables_with_items)
Test show_variables with variables. ... ok
test_process_command_clear (test_cli.TestXTKReplProcessing.test_process_command_clear)
Test clear command. ... ok
test_process_command_help (test_cli.TestXTKReplProcessing.test_process_command_help)
Test help command. ... FAIL
test_process_command_history (test_cli.TestXTKReplProcessing.test_process_command_history)
Test history command. ... FAIL
test_process_command_line (test_cli.TestXTKReplProcessing.test_process_command_line)
Test processing command lines starting with ':'. ... FAIL
test_process_command_unknown (test_cli.TestXTKReplProcessing.test_process_command_unknown)
Test unknown command. ... ok
test_process_command_vars (test_cli.TestXTKReplProcessing.test_process_command_vars)
Test vars command. ... FAIL
test_process_sexpr (test_cli.TestXTKReplProcessing.test_process_sexpr)
Test processing S-expressions. ... FAIL
test_process_variable_assignment (test_cli.TestXTKReplProcessing.test_process_variable_assignment)
Test processing variable assignments. ... ok
test_run_empty_line (test_cli.TestXTKReplRun.test_run_empty_line)
Test REPL handles empty lines. ... ╭──────────────────────────────────────────────────────────────────────────────╮
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │
│ ┃                      XTK - Expression Toolkit REPL                       ┃ │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ │
│                                                                              │
│ Type /help for available commands                                            │
│                                                                              │
│ Try:                                                                         │
│                                                                              │
│  • (+ (* 2 x) 3) - Parse S-expression                                        │
│  • 2*x + 3 - Parse infix notation                                            │
│  • /tree - Visualize expression tree                                         │
│  • /rules load algebra - Load rewrite rules                                  │
╰──────────────────────────────────────────────────────────────────────────────╯
Goodbye!
ok
test_run_eof_error (test_cli.TestXTKReplRun.test_run_eof_error)
Test REPL handles EOFError. ... ╭──────────────────────────────────────────────────────────────────────────────╮
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │
│ ┃                      XTK - Expression Toolkit REPL                       ┃ │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ │
│                                                                              │
│ Type /help for available commands                                            │
│                                                                              │
│ Try:                                                                         │
│                                                                              │
│  • (+ (* 2 x) 3) - Parse S-expression                                        │
│  • 2*x + 3 - Parse infix notation                                            │
│  • /tree - Visualize expression tree                                         │
│  • /rules load algebra - Load rewrite rules                                  │
╰──────────────────────────────────────────────────────────────────────────────╯

Goodbye!
FAIL
test_run_exit_command (test_cli.TestXTKReplRun.test_run_exit_command)
Test REPL quits on 'exit' command. ... ╭──────────────────────────────────────────────────────────────────────────────╮
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │
│ ┃                      XTK - Expression Toolkit REPL                       ┃ │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ │
│                                                                              │
│ Type /help for available commands                                            │
│                                                                              │
│ Try:                                                                         │
│                                                                              │
│  • (+ (* 2 x) 3) - Parse S-expression                                        │
│  • 2*x + 3 - Parse infix notation                                            │
│  • /tree - Visualize expression tree                                         │
│  • /rules load algebra - Load rewrite rules                                  │
╰──────────────────────────────────────────────────────────────────────────────╯
Goodbye!
FAIL
test_run_keyboard_interrupt (test_cli.TestXTKReplRun.test_run_keyboard_interrupt)
Test REPL handles KeyboardInterrupt. ... ╭──────────────────────────────────────────────────────────────────────────────╮
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │
│ ┃                      XTK - Expression Toolkit REPL                       ┃ │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ │
│                                                                              │
│ Type /help for available commands                                            │
│                                                                              │
│ Try:                                                                         │
│                                                                              │
│  • (+ (* 2 x) 3) - Parse S-expression                                        │
│  • 2*x + 3 - Parse infix notation                                            │
│  • /tree - Visualize expression tree                                         │
│  • /rules load algebra - Load rewrite rules                                  │
╰──────────────────────────────────────────────────────────────────────────────╯

Use /quit or /exit to leave the REPL
Goodbye!
FAIL
test_run_quit_command (test_cli.TestXTKReplRun.test_run_quit_command)
Test REPL quits on 'quit' command. ... ╭──────────────────────────────────────────────────────────────────────────────╮
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │
│ ┃                      XTK - Expression Toolkit REPL                       ┃ │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ │
│                                                                              │
│ Type /help for available commands                                            │
│                                                                              │
│ Try:                                                                         │
│                                                                              │
│  • (+ (* 2 x) 3) - Parse S-expression                                        │
│  • 2*x + 3 - Parse infix notation                                            │
│  • /tree - Visualize expression tree                                         │
│  • /rules load algebra - Load rewrite rules                                  │
╰──────────────────────────────────────────────────────────────────────────────╯
Goodbye!
FAIL
test_algebraic_simplification (test_edge_cases.TestComplexScenarios.test_algebraic_simplification)
Test algebraic simplification with multiple rules. ... ok
test_derivative_chain_rule (test_edge_cases.TestComplexScenarios.test_derivative_chain_rule)
Test derivative with chain rule. ... ERROR
test_mixed_numeric_evaluation (test_edge_cases.TestComplexScenarios.test_mixed_numeric_evaluation)
Test evaluation with mixed numeric types. ... ok
test_constant_vs_variable_patterns (test_edge_cases.TestEdgeCases.test_constant_vs_variable_patterns)
Test distinction between constant and variable patterns. ... ok
test_dsl_parser_precedence (test_edge_cases.TestEdgeCases.test_dsl_parser_precedence)
Test DSL parser respects operator precedence. ... ok
test_empty_list_handling (test_edge_cases.TestEdgeCases.test_empty_list_handling)
Test handling of empty lists in various contexts. ... ok
test_evaluation_with_callable_bindings (test_edge_cases.TestEdgeCases.test_evaluation_with_callable_bindings)
Test evaluation with function bindings. ... ok
test_expression_equality_and_copying (test_edge_cases.TestEdgeCases.test_expression_equality_and_copying)
Test Expression equality and deep copying. ... ok
test_fluent_api_chaining (test_edge_cases.TestEdgeCases.test_fluent_api_chaining)
Test fluent API method chaining. ... ERROR
test_history_tracking (test_edge_cases.TestEdgeCases.test_history_tracking)
Test that transformation history is tracked correctly. ... ok
test_instantiation_with_nested_substitution (test_edge_cases.TestEdgeCases.test_instantiation_with_nested_substitution)
Test instantiation with nested skeleton evaluations. ... ok
test_latex_conversion (test_edge_cases.TestEdgeCases.test_latex_conversion)
Test LaTeX conversion for various expressions. ... ok
test_nested_pattern_matching (test_edge_cases.TestEdgeCases.test_nested_pattern_matching)
Test deeply nested pattern matching. ... ok
test_parser_edge_cases (test_edge_cases.TestEdgeCases.test_parser_edge_cases)
Test parser with edge cases. ... ok
test_pattern_variable_conflicts (test_edge_cases.TestEdgeCases.test_pattern_variable_conflicts)
Test pattern matching with variable conflicts. ... ok
test_rule_order_sensitivity (test_edge_cases.TestEdgeCases.test_rule_order_sensitivity)
Test that rule order matters for correctness. ... ERROR
test_simplifier_infinite_loop_prevention (test_edge_cases.TestEdgeCases.test_simplifier_infinite_loop_prevention)
Test that simplifier doesn't get stuck in infinite loops. ... ERROR
test_substitution_recursive (test_edge_cases.TestEdgeCases.test_substitution_recursive)
Test recursive substitution. ... ok
test_1 (test_evaluate.TestEvaluate.test_1) ... ok
test_evaluate_constant (test_evaluate.TestEvaluate.test_evaluate_constant) ... ok
test_evaluate_deeply_nested_expression (test_evaluate.TestEvaluate.test_evaluate_deeply_nested_expression) ... ok
test_evaluate_expression_with_constants_and_variables (test_evaluate.TestEvaluate.test_evaluate_expression_with_constants_and_variables) ... ok
test_evaluate_expression_with_missing_variable (test_evaluate.TestEvaluate.test_evaluate_expression_with_missing_variable) ... FAIL
test_evaluate_expression_with_no_operators (test_evaluate.TestEvaluate.test_evaluate_expression_with_no_operators) ... ok
test_evaluate_expression_with_non_callable_operator (test_evaluate.TestEvaluate.test_evaluate_expression_with_non_callable_operator) ... ok
test_evaluate_expression_with_variables (test_evaluate.TestEvaluate.test_evaluate_expression_with_variables) ... ok
test_evaluate_nested_expression (test_evaluate.TestEvaluate.test_evaluate_nested_expression) ... ok
test_evaluate_simple_expression (test_evaluate.TestEvaluate.test_evaluate_simple_expression) ... ok
test_evaluate_variable (test_evaluate.TestEvaluate.test_evaluate_variable) ... ok
test_evaluate_with_function_in_expression (test_evaluate.TestEvaluate.test_evaluate_with_function_in_expression) ... ok
test_add_conflicting_entry (test_extend_dictionary.TestExtendDictionary.test_add_conflicting_entry) ... ok
test_add_matching_entry (test_extend_dictionary.TestExtendDictionary.test_add_matching_entry) ... ok
test_add_new_entry_to_empty_dict (test_extend_dictionary.TestExtendDictionary.test_add_new_entry_to_empty_dict) ... ok
test_add_non_conflicting_entry (test_extend_dictionary.TestExtendDictionary.test_add_non_conflicting_entry) ... ok
test_extend_with_multiple_new_variables (test_extend_dictionary.TestExtendDictionary.test_extend_with_multiple_new_variables) ... ok
test_addition_expression (test_fluent_api.TestASCIIRendering.test_addition_expression)
Test rendering addition expression. ... ok
test_complex_fraction (test_fluent_api.TestASCIIRendering.test_complex_fraction)
Test rendering complex nested fraction. ... ok
test_derivative_expression (test_fluent_api.TestASCIIRendering.test_derivative_expression)
Test rendering derivative expressions. ... ok
test_nested_power (test_fluent_api.TestASCIIRendering.test_nested_power)
Test rendering nested power expression. ... ok
test_numeric_fraction (test_fluent_api.TestASCIIRendering.test_numeric_fraction)
Test rendering a numeric fraction. ... ok
test_power_expression (test_fluent_api.TestASCIIRendering.test_power_expression)
Test rendering power/exponent expressions. ... ok
test_simple_fraction (test_fluent_api.TestASCIIRendering.test_simple_fraction)
Test rendering a simple fraction. ... ok
test_simple_number (test_fluent_api.TestASCIIRendering.test_simple_number)
Test rendering simple number. ... ok
test_simple_variable (test_fluent_api.TestASCIIRendering.test_simple_variable)
Test rendering simple variable. ... ok
test_circular_substitution (test_fluent_api.TestEdgeCasesFluentAPI.test_circular_substitution)
Test that substitution doesn't cause infinite recursion. ... ok
test_deeply_nested_expression (test_fluent_api.TestEdgeCasesFluentAPI.test_deeply_nested_expression)
Test deeply nested expression. ... ok
test_empty_expression (test_fluent_api.TestEdgeCasesFluentAPI.test_empty_expression)
Test empty expression handling. ... FAIL
test_evaluate_with_partial_bindings (test_fluent_api.TestEdgeCasesFluentAPI.test_evaluate_with_partial_bindings)
Test evaluation with partial bindings. ... ok
test_history_limit (test_fluent_api.TestEdgeCasesFluentAPI.test_history_limit)
Test that history doesn't grow unbounded. ... ok
test_special_characters_in_variables (test_fluent_api.TestEdgeCasesFluentAPI.test_special_characters_in_variables)
Test special characters in variable names. ... ok
test_transform_with_empty_bindings (test_fluent_api.TestEdgeCasesFluentAPI.test_transform_with_empty_bindings)
Test transformation with empty bindings. ... ok
test_very_long_expression (test_fluent_api.TestEdgeCasesFluentAPI.test_very_long_expression)
Test very long expression. ... ok
test_bind (test_fluent_api.TestExpression.test_bind)
Test binding variables. ... ok
test_copy (test_fluent_api.TestExpression.test_copy)
Test deep copying. ... ok
test_differentiate (test_fluent_api.TestExpression.test_differentiate)
Test differentiation. ... FAIL
test_equality (test_fluent_api.TestExpression.test_equality)
Test equality comparison. ... ok
test_evaluate (test_fluent_api.TestExpression.test_evaluate)
Test evaluation. ... ok
test_evaluate_without_bindings (test_fluent_api.TestExpression.test_evaluate_without_bindings)
Test evaluation without sufficient bindings. ... ok
test_history_tracking (test_fluent_api.TestExpression.test_history_tracking)
Test that history is tracked correctly. ... ok
test_initialization (test_fluent_api.TestExpression.test_initialization)
Test Expression initialization. ... ok
test_match_pattern (test_fluent_api.TestExpression.test_match_pattern)
Test pattern matching. ... ok
test_method_chaining (test_fluent_api.TestExpression.test_method_chaining)
Test fluent method chaining. ... ok
test_simplify (test_fluent_api.TestExpression.test_simplify)
Test simplification. ... ok
test_simplify_no_rules (test_fluent_api.TestExpression.test_simplify_no_rules)
Test simplification without rules. ... ok
test_string_representation (test_fluent_api.TestExpression.test_string_representation)
Test string representations. ... ok
test_substitute (test_fluent_api.TestExpression.test_substitute)
Test substitution. ... ok
test_substitute_nested (test_fluent_api.TestExpression.test_substitute_nested)
Test nested substitution. ... ok
test_to_latex (test_fluent_api.TestExpression.test_to_latex)
Test LaTeX conversion. ... ok
test_to_latex_nested (test_fluent_api.TestExpression.test_to_latex_nested)
Test LaTeX conversion for nested expressions. ... ok
test_transform (test_fluent_api.TestExpression.test_transform)
Test transformation. ... ok
test_transform_no_match (test_fluent_api.TestExpression.test_transform_no_match)
Test transformation with no match. ... ok
test_with_rule (test_fluent_api.TestExpression.test_with_rule)
Test adding single rule. ... ok
test_with_rules (test_fluent_api.TestExpression.test_with_rules)
Test adding rules. ... ok
test_add (test_fluent_api.TestExpressionBuilder.test_add)
Test addition. ... ok
test_builder_accepts_expressions (test_fluent_api.TestExpressionBuilder.test_builder_accepts_expressions)
Test that builder methods accept Expression objects. ... ok
test_constant (test_fluent_api.TestExpressionBuilder.test_constant)
Test constant creation. ... ok
test_cos (test_fluent_api.TestExpressionBuilder.test_cos)
Test cosine function. ... ok
test_derivative (test_fluent_api.TestExpressionBuilder.test_derivative)
Test derivative creation. ... ok
test_divide (test_fluent_api.TestExpressionBuilder.test_divide)
Test division. ... ok
test_exp (test_fluent_api.TestExpressionBuilder.test_exp)
Test exponential function. ... ok
test_from_string (test_fluent_api.TestExpressionBuilder.test_from_string)
Test parsing from string. ... ok
test_log (test_fluent_api.TestExpressionBuilder.test_log)
Test logarithm function. ... ok
test_multiply (test_fluent_api.TestExpressionBuilder.test_multiply)
Test multiplication. ... ok
test_nested_building (test_fluent_api.TestExpressionBuilder.test_nested_building)
Test building nested expressions. ... ok
test_power (test_fluent_api.TestExpressionBuilder.test_power)
Test exponentiation. ... ok
test_sin (test_fluent_api.TestExpressionBuilder.test_sin)
Test sine function. ... ok
test_subtract (test_fluent_api.TestExpressionBuilder.test_subtract)
Test subtraction. ... ok
test_variable (test_fluent_api.TestExpressionBuilder.test_variable)
Test variable creation. ... ok
test_algebraic_simplification_workflow (test_fluent_api.TestIntegrationFluentAPI.test_algebraic_simplification_workflow)
Test algebraic simplification workflow. ... ok
test_complete_workflow (test_fluent_api.TestIntegrationFluentAPI.test_complete_workflow)
Test a complete symbolic computation workflow. ... ERROR
test_symbolic_to_numeric_workflow (test_fluent_api.TestIntegrationFluentAPI.test_symbolic_to_numeric_workflow)
Test symbolic to numeric evaluation. ... FAIL
test_E_alias (test_fluent_api.TestShorthands.test_E_alias)
Test that E is an alias for ExpressionBuilder. ... ok
test_expr_alias (test_fluent_api.TestShorthands.test_expr_alias)
Test that expr is an alias for Expression. ... ok
test_instantiate_atomic_skeleton (test_instantiate.TestInstantiate.test_instantiate_atomic_skeleton)
Test instantiating an atomic skeleton. ... ok
test_instantiate_compound_structure (test_instantiate.TestInstantiate.test_instantiate_compound_structure)
Test instantiating a compound structure. ... ok
test_instantiate_constant (test_instantiate.TestInstantiate.test_instantiate_constant)
Test instantiating a constant skeleton. ... ok
test_instantiate_nested_structure (test_instantiate.TestInstantiate.test_instantiate_nested_structure)
Test instantiating a nested skeleton structure. ... ok
test_instantiate_variable (test_instantiate.TestInstantiate.test_instantiate_variable)
Test instantiating a variable. ... ok
test_instantiate_with_constant_in_evaluation (test_instantiate.TestInstantiate.test_instantiate_with_constant_in_evaluation)
Test instantiating where evaluation involves constants. ... ok
test_instantiate_with_empty_dictionary (test_instantiate.TestInstantiate.test_instantiate_with_empty_dictionary)
Test instantiating with an empty dictionary. ... ok
test_instantiate_with_missing_variable (test_instantiate.TestInstantiate.test_instantiate_with_missing_variable)
Test instantiating with a missing variable in the dictionary. ... ok
test_instantiate_with_skeleton_evaluation (test_instantiate.TestInstantiate.test_instantiate_with_skeleton_evaluation)
Test instantiating with skeleton evaluation. ... ok
test_expression_creation_methods (test_integration.TestCLIIntegration.test_expression_creation_methods)
Test different ways to create expressions. ... ok
test_rule_loading_methods (test_integration.TestCLIIntegration.test_rule_loading_methods)
Test different ways to load rules. ... ok
test_algebraic_simplification_workflow (test_integration.TestCompleteWorkflows.test_algebraic_simplification_workflow)
Test complete algebraic simplification. ... ok
test_rule_composition_workflow (test_integration.TestCompleteWorkflows.test_rule_composition_workflow)
Test composing multiple rule sets. ... ok
test_symbolic_differentiation_workflow (test_integration.TestCompleteWorkflows.test_symbolic_differentiation_workflow)
Test complete differentiation workflow. ... ERROR
test_symbolic_to_numeric_workflow (test_integration.TestCompleteWorkflows.test_symbolic_to_numeric_workflow)
Test symbolic manipulation followed by numeric evaluation. ... ERROR
test_evaluation_errors (test_integration.TestErrorHandling.test_evaluation_errors)
Test evaluation with missing bindings. ... ok
test_file_loading_errors (test_integration.TestErrorHandling.test_file_loading_errors)
Test file loading with invalid files. ... ok
test_invalid_pattern_matching (test_integration.TestErrorHandling.test_invalid_pattern_matching)
Test pattern matching with invalid inputs. ... ok
test_malformed_sexpr (test_integration.TestErrorHandling.test_malformed_sexpr)
Test handling of malformed S-expressions. ... ok
test_rule_application_errors (test_integration.TestErrorHandling.test_rule_application_errors)
Test rule application with invalid rules. ... ERROR
test_json_format_preservation (test_integration.TestFileFormats.test_json_format_preservation)
Test that JSON format is preserved exactly. ... ok
test_lisp_to_json_conversion (test_integration.TestFileFormats.test_lisp_to_json_conversion)
Test that Lisp format converts to same JSON AST. ... ok
test_rule_format_equivalence (test_integration.TestFileFormats.test_rule_format_equivalence)
Test that rules work the same regardless of format. ... ok
test_ast_transformation (test_integration.TestHomoiconicNature.test_ast_transformation)
Test transforming AST with rules. ... ok
test_code_data_roundtrip (test_integration.TestHomoiconicNature.test_code_data_roundtrip)
Test that code can be treated as data and vice versa. ... ok
test_expressions_as_data_structures (test_integration.TestHomoiconicNature.test_expressions_as_data_structures)
Test manipulating expressions as data structures. ... ok
test_json_is_ast (test_integration.TestHomoiconicNature.test_json_is_ast)
Test that JSON directly represents the AST. ... ok
test_pattern_matching_on_ast (test_integration.TestHomoiconicNature.test_pattern_matching_on_ast)
Test that pattern matching works directly on AST. ... ok
test_rules_are_data (test_integration.TestHomoiconicNature.test_rules_are_data)
Test that rules are just data structures. ... ok
test_deep_nesting_performance (test_integration.TestPerformance.test_deep_nesting_performance)
Test handling of deeply nested expressions. ... ok
test_large_expression_performance (test_integration.TestPerformance.test_large_expression_performance)
Test handling of expressions with many terms. ... ok
test_many_rules_performance (test_integration.TestPerformance.test_many_rules_performance)
Test applying many rules. ... ok
test_pattern_matching_performance (test_integration.TestPerformance.test_pattern_matching_performance)
Test pattern matching on complex expressions. ... ok
test_match_arbitrary_expression (test_matcher.TestMatch.test_match_arbitrary_expression)
Test matching an arbitrary expression. ... ok
test_match_atomic_patterns (test_matcher.TestMatch.test_match_atomic_patterns)
Test matching atomic patterns. ... ok
test_match_complex_structure (test_matcher.TestMatch.test_match_complex_structure)
Test matching a complex nested structure. ... ok
test_match_constants (test_matcher.TestMatch.test_match_constants)
Test matching a constant pattern with a constant expression. ... ok
test_match_empty_pattern_and_expression (test_matcher.TestMatch.test_match_empty_pattern_and_expression)
Test matching an empty pattern with an empty expression. ... ok
test_match_empty_pattern_with_non_empty_expression (test_matcher.TestMatch.test_match_empty_pattern_with_non_empty_expression)
Test matching an empty pattern with a non-empty expression. ... ok
test_match_failed_due_to_structure (test_matcher.TestMatch.test_match_failed_due_to_structure)
Test a match failure due to structure mismatch. ... ok
test_match_nary (test_matcher.TestMatch.test_match_nary)
Test matching with 3-ary pattern. ... ok
test_match_nary_complex (test_matcher.TestMatch.test_match_nary_complex)
Test matching with 3-ary pattern with complex sub-expressions. ... ok
test_match_partial_match (test_matcher.TestMatch.test_match_partial_match)
Test matching where only part of the pattern matches. ... skipped 'Investigate if this test should return `failed` or raise an exception. I think in fact'
test_match_recursive_pattern (test_matcher.TestMatch.test_match_recursive_pattern)
Test matching a recursive pattern. ... ok
test_match_repeated_variable (test_matcher.TestMatch.test_match_repeated_variable)
Test matching with repeated variables. ... ok
test_match_variables (test_matcher.TestMatch.test_match_variables)
Test matching a variable pattern with a variable expression. ... ok
test_match_with_existing_dictionary (test_matcher.TestMatch.test_match_with_existing_dictionary)
Test matching with an existing dictionary. ... ok
test_parse_assignment (test_parser.TestDSLParser.test_parse_assignment)
Test parsing assignment. ... skipped 'Assignment not implemented in DSL parser'
test_parse_chained_operations (test_parser.TestDSLParser.test_parse_chained_operations)
Test parsing chained operations. ... ok
test_parse_comparison (test_parser.TestDSLParser.test_parse_comparison)
Test parsing comparison operators. ... skipped 'Comparison operators not implemented in DSL parser'
test_parse_complex_expression (test_parser.TestDSLParser.test_parse_complex_expression)
Test parsing complex expressions. ... ok
test_parse_dict_literal (test_parser.TestDSLParser.test_parse_dict_literal)
Test parsing dict literals. ... skipped 'Dict literals not implemented in DSL parser'
test_parse_error_invalid_syntax (test_parser.TestDSLParser.test_parse_error_invalid_syntax)
Test parse errors on invalid syntax. ... skipped 'Error handling not implemented in DSL parser'
test_parse_function_multiple_args (test_parser.TestDSLParser.test_parse_function_multiple_args)
Test parsing function with multiple arguments. ... ok
test_parse_function_single_arg (test_parser.TestDSLParser.test_parse_function_single_arg)
Test parsing function with single argument. ... ok
test_parse_identifier (test_parser.TestDSLParser.test_parse_identifier)
Test parsing identifiers. ... ok
test_parse_list_literal (test_parser.TestDSLParser.test_parse_list_literal)
Test parsing list literals. ... skipped 'List literals not implemented in DSL parser'
test_parse_logical (test_parser.TestDSLParser.test_parse_logical)
Test parsing logical operators. ... skipped 'Logical operators not implemented in DSL parser'
test_parse_nested_functions (test_parser.TestDSLParser.test_parse_nested_functions)
Test parsing nested function calls. ... ok
test_parse_number (test_parser.TestDSLParser.test_parse_number)
Test parsing numbers. ... ok
test_parse_operators (test_parser.TestDSLParser.test_parse_operators)
Test parsing with operators. ... ok
test_parse_power (test_parser.TestDSLParser.test_parse_power)
Test parsing power operator. ... skipped 'Power operator not implemented in DSL parser'
test_parse_precedence (test_parser.TestDSLParser.test_parse_precedence)
Test operator precedence. ... ok
test_parse_unary_minus (test_parser.TestDSLParser.test_parse_unary_minus)
Test parsing unary minus. ... skipped 'Unary minus not implemented in DSL parser'
test_parse_with_whitespace (test_parser.TestDSLParser.test_parse_with_whitespace)
Test parsing with various whitespace. ... ok
test_global_parser_exists (test_parser.TestDSLParserGlobal.test_global_parser_exists)
Test that global parser is available. ... ok
test_global_parser_works (test_parser.TestDSLParserGlobal.test_global_parser_works)
Test that global parser works. ... ok
test_dsl_parser_state_reset (test_parser.TestEdgeCases.test_dsl_parser_state_reset)
Test that parser state resets between calls. ... ok
test_empty_input (test_parser.TestEdgeCases.test_empty_input)
Test parsing empty input. ... ok
test_format_sexpr_recursive (test_parser.TestEdgeCases.test_format_sexpr_recursive)
Test formatting deeply nested expressions. ... ok
test_format_sexpr_with_mixed_types (test_parser.TestEdgeCases.test_format_sexpr_with_mixed_types)
Test formatting with mixed types. ... ok
test_parse_sexpr_with_numbers_in_symbols (test_parser.TestEdgeCases.test_parse_sexpr_with_numbers_in_symbols)
Test parsing symbols with numbers. ... ok
test_tokenize_special_chars (test_parser.TestEdgeCases.test_tokenize_special_chars)
Test tokenizing with special characters. ... ok
test_format_atoms (test_parser.TestFormatSexpr.test_format_atoms)
Test formatting atomic values. ... ok
test_format_lists (test_parser.TestFormatSexpr.test_format_lists)
Test formatting lists. ... ok
test_format_nested (test_parser.TestFormatSexpr.test_format_nested)
Test formatting nested expressions. ... ok
test_format_patterns (test_parser.TestFormatSexpr.test_format_patterns)
Test formatting pattern expressions. ... ok
test_format_special_values (test_parser.TestFormatSexpr.test_format_special_values)
Test formatting special values. ... ok
test_parse_floats (test_parser.TestParseAtom.test_parse_floats)
Test parsing float atoms. ... ok
test_parse_integers (test_parser.TestParseAtom.test_parse_integers)
Test parsing integer atoms. ... ok
test_parse_symbols (test_parser.TestParseAtom.test_parse_symbols)
Test parsing symbol atoms. ... ok
test_parse_dsl_arithmetic (test_parser.TestParseDSL.test_parse_dsl_arithmetic)
Test parsing arithmetic in DSL. ... ok
test_parse_dsl_function_call (test_parser.TestParseDSL.test_parse_dsl_function_call)
Test parsing function calls. ... ok
test_parse_dsl_nested (test_parser.TestParseDSL.test_parse_dsl_nested)
Test parsing nested DSL expressions. ... ok
test_parse_dsl_parentheses (test_parser.TestParseDSL.test_parse_dsl_parentheses)
Test parsing with parentheses. ... ok
test_parse_dsl_simple (test_parser.TestParseDSL.test_parse_dsl_simple)
Test parsing simple DSL expressions. ... ok
test_parse_atoms (test_parser.TestParseSexpr.test_parse_atoms)
Test parsing atomic expressions. ... ok
test_parse_empty_list (test_parser.TestParseSexpr.test_parse_empty_list)
Test parsing empty list. ... ok
test_parse_error_unmatched (test_parser.TestParseSexpr.test_parse_error_unmatched)
Test parse errors. ... ok
test_parse_multiple_expressions (test_parser.TestParseSexpr.test_parse_multiple_expressions)
Test parsing with multiple expressions - should raise error. ... ok
test_parse_nested_list (test_parser.TestParseSexpr.test_parse_nested_list)
Test parsing nested lists. ... ok
test_parse_patterns (test_parser.TestParseSexpr.test_parse_patterns)
Test parsing pattern expressions. ... ok
test_parse_simple_list (test_parser.TestParseSexpr.test_parse_simple_list)
Test parsing simple lists. ... ok
test_tokenize_nested (test_parser.TestTokenize.test_tokenize_nested)
Test tokenizing nested expressions. ... ok
test_tokenize_simple (test_parser.TestTokenize.test_tokenize_simple)
Test tokenizing simple expressions. ... ok
test_tokenize_tabs_newlines (test_parser.TestTokenize.test_tokenize_tabs_newlines)
Test tokenizing with tabs and newlines. ... ok
test_tokenize_whitespace (test_parser.TestTokenize.test_tokenize_whitespace)
Test tokenizing with whitespace. ... ok
test_car_empty_list (test_rewriter_comprehensive.TestBasicListOperations.test_car_empty_list)
Test car with empty list raises error. ... ok
test_car_non_list (test_rewriter_comprehensive.TestBasicListOperations.test_car_non_list)
Test car with non-list raises error. ... ok
test_car_valid_list (test_rewriter_comprehensive.TestBasicListOperations.test_car_valid_list)
Test car with valid non-empty list. ... ok
test_cdr_empty_list (test_rewriter_comprehensive.TestBasicListOperations.test_cdr_empty_list)
Test cdr with empty list returns empty list. ... ok
test_cdr_non_list (test_rewriter_comprehensive.TestBasicListOperations.test_cdr_non_list)
Test cdr with non-list raises error. ... ok
test_cdr_valid_list (test_rewriter_comprehensive.TestBasicListOperations.test_cdr_valid_list)
Test cdr with valid list. ... ok
test_cons (test_rewriter_comprehensive.TestBasicListOperations.test_cons)
Test cons operation. ... ok
test_null (test_rewriter_comprehensive.TestBasicListOperations.test_null)
Test null predicate. ... ok
test_empty_dictionary (test_rewriter_comprehensive.TestDictionary.test_empty_dictionary)
Test empty dictionary creation. ... ok
test_extend_dictionary_existing_different_value (test_rewriter_comprehensive.TestDictionary.test_extend_dictionary_existing_different_value)
Test extending dictionary with conflicting binding. ... ok
test_extend_dictionary_existing_same_value (test_rewriter_comprehensive.TestDictionary.test_extend_dictionary_existing_same_value)
Test extending dictionary with existing binding (same value). ... ok
test_extend_dictionary_new_binding (test_rewriter_comprehensive.TestDictionary.test_extend_dictionary_new_binding)
Test extending dictionary with new binding. ... ok
test_lookup_existing (test_rewriter_comprehensive.TestDictionary.test_lookup_existing)
Test lookup of existing variable. ... ok
test_lookup_non_existing (test_rewriter_comprehensive.TestDictionary.test_lookup_non_existing)
Test lookup of non-existing variable. ... ok
test_evaluate_with_non_list_dict (test_rewriter_comprehensive.TestErrorConditions.test_evaluate_with_non_list_dict)
Test evaluate with non-list dictionary. ... ok
test_match_with_callable (test_rewriter_comprehensive.TestErrorConditions.test_match_with_callable)
Test that callables in expressions are handled. ... FAIL
test_evaluate_constant (test_rewriter_comprehensive.TestEvaluation.test_evaluate_constant)
Test evaluating constants. ... ok
test_evaluate_empty_expression (test_rewriter_comprehensive.TestEvaluation.test_evaluate_empty_expression)
Test evaluating empty expression. ... ok
test_evaluate_nested_arithmetic (test_rewriter_comprehensive.TestEvaluation.test_evaluate_nested_arithmetic)
Test evaluating nested arithmetic expressions. ... ok
test_evaluate_simple_arithmetic (test_rewriter_comprehensive.TestEvaluation.test_evaluate_simple_arithmetic)
Test evaluating simple arithmetic expressions. ... ok
test_evaluate_unknown_operator (test_rewriter_comprehensive.TestEvaluation.test_evaluate_unknown_operator)
Test evaluating with unknown operator. ... ok
test_evaluate_variable_lookup (test_rewriter_comprehensive.TestEvaluation.test_evaluate_variable_lookup)
Test evaluating variables with lookup. ... ok
test_evaluate_with_variables (test_rewriter_comprehensive.TestEvaluation.test_evaluate_with_variables)
Test evaluating expressions with variables. ... ok
test_instantiate_compound_with_substitution (test_rewriter_comprehensive.TestInstantiation.test_instantiate_compound_with_substitution)
Test instantiating compound expression with substitutions. ... ok
test_instantiate_constant (test_rewriter_comprehensive.TestInstantiation.test_instantiate_constant)
Test instantiating a constant. ... ok
test_instantiate_empty_list (test_rewriter_comprehensive.TestInstantiation.test_instantiate_empty_list)
Test instantiating empty list. ... ok
test_instantiate_mixed_literal_and_substitution (test_rewriter_comprehensive.TestInstantiation.test_instantiate_mixed_literal_and_substitution)
Test instantiating with mixed literals and substitutions. ... ok
test_instantiate_nested_structure (test_rewriter_comprehensive.TestInstantiation.test_instantiate_nested_structure)
Test instantiating nested structures. ... ok
test_instantiate_skeleton_substitution (test_rewriter_comprehensive.TestInstantiation.test_instantiate_skeleton_substitution)
Test instantiating with skeleton substitution. ... ok
test_instantiate_variable (test_rewriter_comprehensive.TestInstantiation.test_instantiate_variable)
Test instantiating a variable (literal). ... ok
test_match_arbitrary_constant (test_rewriter_comprehensive.TestPatternMatching.test_match_arbitrary_constant)
Test matching with arbitrary constant pattern. ... ok
test_match_arbitrary_expression (test_rewriter_comprehensive.TestPatternMatching.test_match_arbitrary_expression)
Test matching with arbitrary expression pattern. ... ok
test_match_arbitrary_variable (test_rewriter_comprehensive.TestPatternMatching.test_match_arbitrary_variable)
Test matching with arbitrary variable pattern. ... ok
test_match_compound_expressions (test_rewriter_comprehensive.TestPatternMatching.test_match_compound_expressions)
Test matching compound expressions. ... ok
test_match_constants (test_rewriter_comprehensive.TestPatternMatching.test_match_constants)
Test matching constants. ... ok
test_match_empty_lists (test_rewriter_comprehensive.TestPatternMatching.test_match_empty_lists)
Test matching empty lists. ... ERROR
test_match_nested_patterns (test_rewriter_comprehensive.TestPatternMatching.test_match_nested_patterns)
Test matching nested patterns. ... ok
test_match_variables (test_rewriter_comprehensive.TestPatternMatching.test_match_variables)
Test matching variables (treated as literals). ... ok
test_match_with_failed_dict (test_rewriter_comprehensive.TestPatternMatching.test_match_with_failed_dict)
Test that failed dictionary propagates. ... ok
test_arbitrary_constant (test_rewriter_comprehensive.TestPredicates.test_arbitrary_constant)
Test arbitrary constant pattern predicate. ... ok
test_arbitrary_expression (test_rewriter_comprehensive.TestPredicates.test_arbitrary_expression)
Test arbitrary expression pattern predicate. ... ok
test_arbitrary_variable (test_rewriter_comprehensive.TestPredicates.test_arbitrary_variable)
Test arbitrary variable pattern predicate. ... ok
test_atom (test_rewriter_comprehensive.TestPredicates.test_atom)
Test atom predicate. ... ok
test_compound (test_rewriter_comprehensive.TestPredicates.test_compound)
Test compound predicate. ... ok
test_constant (test_rewriter_comprehensive.TestPredicates.test_constant)
Test constant predicate. ... ok
test_skeleton_evaluation (test_rewriter_comprehensive.TestPredicates.test_skeleton_evaluation)
Test skeleton evaluation pattern predicate. ... ok
test_variable (test_rewriter_comprehensive.TestPredicates.test_variable)
Test variable predicate. ... ok
test_simplify_atom (test_rewriter_comprehensive.TestSimplifierEdgeCases.test_simplify_atom)
Test simplifier with atomic expressions. ... ok
test_simplify_deeply_nested (test_rewriter_comprehensive.TestSimplifierEdgeCases.test_simplify_deeply_nested)
Test simplifier with deeply nested expressions. ... ok
test_simplify_preventing_infinite_loops (test_rewriter_comprehensive.TestSimplifierEdgeCases.test_simplify_preventing_infinite_loops)
Test that simplifier terminates with potentially recursive rules. ... ok
test_simplify_rule_order_matters (test_rewriter_comprehensive.TestSimplifierEdgeCases.test_simplify_rule_order_matters)
Test that rule order affects simplification. ... ok
test_simplify_with_no_rules (test_rewriter_comprehensive.TestSimplifierEdgeCases.test_simplify_with_no_rules)
Test simplifier with no rules still does constant folding. ... ok
test_eval_exp (test_rewriter_comprehensive.TestUtilityFunctions.test_eval_exp)
Test eval_exp extracts second element. ... ok
test_pattern_extraction (test_rewriter_comprehensive.TestUtilityFunctions.test_pattern_extraction)
Test pattern extraction from rule. ... ok
test_skeleton_extraction (test_rewriter_comprehensive.TestUtilityFunctions.test_skeleton_extraction)
Test skeleton extraction from rule. ... ok
test_variable_name_extraction (test_rewriter_comprehensive.TestUtilityFunctions.test_variable_name_extraction)
Test variable name extraction from pattern. ... ok
test_empty_input (test_rule_loader.TestExtractSexprs.test_empty_input)
Test empty input. ... ok
test_multiple_sexprs (test_rule_loader.TestExtractSexprs.test_multiple_sexprs)
Test extracting multiple S-expressions. ... ok
test_nested_sexprs (test_rule_loader.TestExtractSexprs.test_nested_sexprs)
Test extracting nested S-expressions. ... ok
test_single_sexpr (test_rule_loader.TestExtractSexprs.test_single_sexpr)
Test extracting a single S-expression. ... ok
test_unbalanced_parens (test_rule_loader.TestExtractSexprs.test_unbalanced_parens)
Test handling of unbalanced parentheses. ... ok
test_with_comments (test_rule_loader.TestExtractSexprs.test_with_comments)
Test extraction ignoring comments. ... ok
test_with_text_around (test_rule_loader.TestExtractSexprs.test_with_text_around)
Test extraction with surrounding text. ... ok
test_format_complex_rules (test_rule_loader.TestFormatRulesAsLisp.test_format_complex_rules)
Test formatting complex rules. ... ok
test_format_empty (test_rule_loader.TestFormatRulesAsLisp.test_format_empty)
Test formatting empty rules. ... ok
test_format_multiple_rules (test_rule_loader.TestFormatRulesAsLisp.test_format_multiple_rules)
Test formatting multiple rules. ... ok
test_format_single_rule (test_rule_loader.TestFormatRulesAsLisp.test_format_single_rule)
Test formatting single rule. ... ok
test_complex_rule_preservation (test_rule_loader.TestIntegration.test_complex_rule_preservation)
Test that complex rules are preserved correctly. ... ok
test_cross_format_compatibility (test_rule_loader.TestIntegration.test_cross_format_compatibility)
Test that rules saved in one format can be loaded in another. ... ok
test_roundtrip_json (test_rule_loader.TestIntegration.test_roundtrip_json)
Test save → load roundtrip for JSON. ... ok
test_roundtrip_lisp (test_rule_loader.TestIntegration.test_roundtrip_lisp)
Test save → load roundtrip for Lisp. ... ok
test_invalid_rule_format (test_rule_loader.TestIsRuleFormat.test_invalid_rule_format)
Test invalid rule formats. ... ok
test_valid_rule_format (test_rule_loader.TestIsRuleFormat.test_valid_rule_format)
Test valid rule formats. ... ok
test_load_auto_detect (test_rule_loader.TestLoadRules.test_load_auto_detect)
Test auto-detection of format. ... ok
test_load_empty_file (test_rule_loader.TestLoadRules.test_load_empty_file)
Test loading from empty file. ... ok
test_load_from_json_file (test_rule_loader.TestLoadRules.test_load_from_json_file)
Test loading from JSON file. ... ok
test_load_from_lisp_file (test_rule_loader.TestLoadRules.test_load_from_lisp_file)
Test loading from Lisp file. ... ok
test_load_from_list (test_rule_loader.TestLoadRules.test_load_from_list)
Test loading rules from a list. ... ok
test_load_from_string (test_rule_loader.TestLoadRules.test_load_from_string)
Test loading from inline string. ... ok
test_load_nonexistent_file (test_rule_loader.TestLoadRules.test_load_nonexistent_file)
Test loading from non-existent file. ... ok
test_merge_empty (test_rule_loader.TestMergeRules.test_merge_empty)
Test merging empty rule sets. ... ok
test_merge_multiple_sets (test_rule_loader.TestMergeRules.test_merge_multiple_sets)
Test merging multiple rule sets. ... ok
test_merge_preserves_order (test_rule_loader.TestMergeRules.test_merge_preserves_order)
Test that merge preserves relative order. ... ok
test_merge_single_set (test_rule_loader.TestMergeRules.test_merge_single_set)
Test merging single rule set. ... ok
test_merge_with_duplicates (test_rule_loader.TestMergeRules.test_merge_with_duplicates)
Test that duplicates are removed. ... ok
test_parse_empty (test_rule_loader.TestParseRules.test_parse_empty)
Test parsing empty input. ... ok
test_parse_json_rules (test_rule_loader.TestParseRules.test_parse_json_rules)
Test parsing JSON format rules. ... ok
test_parse_lisp_alternating_format (test_rule_loader.TestParseRules.test_parse_lisp_alternating_format)
Test parsing alternating pattern/skeleton format. ... ok
test_parse_lisp_complete_rules (test_rule_loader.TestParseRules.test_parse_lisp_complete_rules)
Test parsing complete Lisp rules. ... ok
test_parse_mixed_formats (test_rule_loader.TestParseRules.test_parse_mixed_formats)
Test that mixed formats don't work. ... ok
test_parse_with_comments (test_rule_loader.TestParseRules.test_parse_with_comments)
Test parsing with comments. ... ok
test_save_as_json (test_rule_loader.TestSaveRules.test_save_as_json)
Test saving as JSON. ... ok
test_save_as_lisp (test_rule_loader.TestSaveRules.test_save_as_lisp)
Test saving as Lisp. ... ok
test_save_empty_rules (test_rule_loader.TestSaveRules.test_save_empty_rules)
Test saving empty rule list. ... ok
test_save_format_explicit (test_rule_loader.TestSaveRules.test_save_format_explicit)
Test explicit format specification. ... ok
test_normalize_dict_rules (test_rule_utils.TestNormalizeRules.test_normalize_dict_rules)
Test normalizing rules in dict format. ... ok
test_normalize_empty_list (test_rule_utils.TestNormalizeRules.test_normalize_empty_list)
Test normalizing empty rule list. ... ok
test_normalize_list_pairs (test_rule_utils.TestNormalizeRules.test_normalize_list_pairs)
Test normalizing rules in list pair format. ... ok
test_normalize_mixed_formats (test_rule_utils.TestNormalizeRules.test_normalize_mixed_formats)
Test normalizing mixed rule formats. ... ok
test_normalize_preserves_rule_semantics (test_rule_utils.TestNormalizeRules.test_normalize_preserves_rule_semantics)
Test that normalization preserves the rule semantics. ... ok
test_from_rule_invalid_format (test_rule_utils.TestRichRule.test_from_rule_invalid_format)
Test that invalid formats raise ValueError or KeyError. ... ok
test_from_rule_with_dict (test_rule_utils.TestRichRule.test_from_rule_with_dict)
Test creating RichRule from dict format. ... ok
test_from_rule_with_list_pair (test_rule_utils.TestRichRule.test_from_rule_with_list_pair)
Test creating RichRule from list pair format. ... ok
test_from_rule_with_tuple_pair_fails (test_rule_utils.TestRichRule.test_from_rule_with_tuple_pair_fails)
Test that tuple pair format is not supported. ... ok
test_to_rule_pair (test_rule_utils.TestRichRule.test_to_rule_pair)
Test converting RichRule back to rule pair. ... ok
test_load_algebra_rules_rich (test_rule_utils.TestRichRuleIntegration.test_load_algebra_rules_rich)
Test loading algebra_rules_rich.py if it exists. ... ok
test_load_deriv_rules_rich (test_rule_utils.TestRichRuleIntegration.test_load_deriv_rules_rich)
Test loading deriv_rules_rich.py if it exists. ... ok
test_simplify_complex_nested_structure (test_simplifier.TestSimplifierFixed.test_simplify_complex_nested_structure)
Test simplifier with complex nested structures. ... ok
test_simplify_constant_patterns (test_simplifier.TestSimplifierFixed.test_simplify_constant_patterns)
Test simplifier with constant-specific patterns. ... ok
test_simplify_distributive_property (test_simplifier.TestSimplifierFixed.test_simplify_distributive_property)
Test simplifier with distributive property pattern. ... ok
test_simplify_double_negative (test_simplifier.TestSimplifierFixed.test_simplify_double_negative)
Test simplifier with double negative pattern. ... ok
test_simplify_identity_rules (test_simplifier.TestSimplifierFixed.test_simplify_identity_rules)
Test simplifier with identity rules. ... ok
test_simplify_nested_with_identities (test_simplifier.TestSimplifierFixed.test_simplify_nested_with_identities)
Test simplifier with nested expressions using identity rules. ... ok
test_simplify_no_infinite_recursion (test_simplifier.TestSimplifierFixed.test_simplify_no_infinite_recursion)
Test that simplifier doesn't cause infinite recursion with circular rules. ... ok
test_simplify_no_rules (test_simplifier.TestSimplifierFixed.test_simplify_no_rules)
Test simplifier with no rules. ... ok
test_simplify_power_rules (test_simplifier.TestSimplifierFixed.test_simplify_power_rules)
Test simplifier with power rules. ... ok
test_simplify_variable_patterns (test_simplifier.TestSimplifierFixed.test_simplify_variable_patterns)
Test simplifier with variable-specific patterns. ... ok
test_simplify_with_empty_expression (test_simplifier.TestSimplifierFixed.test_simplify_with_empty_expression)
Test simplifier with an empty expression. ... ERROR
test_simplify_with_multiple_applicable_rules (test_simplifier.TestSimplifierFixed.test_simplify_with_multiple_applicable_rules)
Test that first matching rule is applied. ... ok
test_arbitrary_constant (test_utils.TestUtils.test_arbitrary_constant) ... ok
test_arbitrary_expression (test_utils.TestUtils.test_arbitrary_expression) ... ok
test_arbitrary_variable (test_utils.TestUtils.test_arbitrary_variable) ... ok
test_atom (test_utils.TestUtils.test_atom) ... ok
test_car_and_cdr (test_utils.TestUtils.test_car_and_cdr) ... ok
test_compound (test_utils.TestUtils.test_compound) ... ok
test_cons (test_utils.TestUtils.test_cons) ... ok
test_constant (test_utils.TestUtils.test_constant) ... ok
test_empty_dictionary (test_utils.TestUtils.test_empty_dictionary) ... ok
test_null (test_utils.TestUtils.test_null) ... ok
test_variable (test_utils.TestUtils.test_variable) ... ok
test_variable_name (test_utils.TestUtils.test_variable_name) ... ok

======================================================================
ERROR: test_derivative_chain_rule (test_edge_cases.TestComplexScenarios.test_derivative_chain_rule)
Test derivative with chain rule.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_edge_cases.py", line 244, in test_derivative_chain_rule
    from xtk.rules.deriv_rules_fixed import deriv_rules_fixed
ModuleNotFoundError: No module named 'xtk.rules.deriv_rules_fixed'

======================================================================
ERROR: test_fluent_api_chaining (test_edge_cases.TestEdgeCases.test_fluent_api_chaining)
Test fluent API method chaining.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_edge_cases.py", line 145, in test_fluent_api_chaining
    .power(E.constant(2))
     ^^^^^
AttributeError: 'Expression' object has no attribute 'power'

======================================================================
ERROR: test_rule_order_sensitivity (test_edge_cases.TestEdgeCases.test_rule_order_sensitivity)
Test that rule order matters for correctness.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_edge_cases.py", line 139, in test_rule_order_sensitivity
    result_bad = simplify_bad(expr)
                 ^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 479, in wrapper
    return simplify_exp(exp, is_root=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 461, in scan
    skel_inst = instantiate(skel, dict_)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 297, in instantiate
    return loop(skeleton)
           ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 295, in loop
    return cons(loop(car(s)), loop(cdr(s)))
                              ^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 295, in loop
    return cons(loop(car(s)), loop(cdr(s)))
                ^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 292, in loop
    eval_result = evaluate(eval_s, dict_)
                  ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 311, in evaluate
    logger.debug(f"evaluate({form}, {dict_})")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RecursionError: maximum recursion depth exceeded while getting the repr of an object

======================================================================
ERROR: test_simplifier_infinite_loop_prevention (test_edge_cases.TestEdgeCases.test_simplifier_infinite_loop_prevention)
Test that simplifier doesn't get stuck in infinite loops.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_edge_cases.py", line 116, in test_simplifier_infinite_loop_prevention
    result = simplify(expr)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 479, in wrapper
    return simplify_exp(exp, is_root=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 473, in scan
    return simplify_exp(skel_inst)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 461, in scan
    skel_inst = instantiate(skel, dict_)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 297, in instantiate
    return loop(skeleton)
           ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 295, in loop
    return cons(loop(car(s)), loop(cdr(s)))
                              ^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 295, in loop
    return cons(loop(car(s)), loop(cdr(s)))
                ^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 292, in loop
    eval_result = evaluate(eval_s, dict_)
                  ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 311, in evaluate
    logger.debug(f"evaluate({form}, {dict_})")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RecursionError: maximum recursion depth exceeded while getting the repr of an object

======================================================================
ERROR: test_complete_workflow (test_fluent_api.TestIntegrationFluentAPI.test_complete_workflow)
Test a complete symbolic computation workflow.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_fluent_api.py", line 509, in test_complete_workflow
    .simplify()
     ^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/fluent_api.py", line 262, in simplify
    result = rewrite_fn(self.expr)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 479, in wrapper
    return simplify_exp(exp, is_root=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 457, in scan
    dict_ = match(pat, exp, empty_dictionary())
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 269, in match
    return match(cdr(pat), cdr(exp), submatch)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 268, in match
    submatch = match(car(pat), car(exp), dict_)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 268, in match
    submatch = match(car(pat), car(exp), dict_)
                               ^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 40, in car
    raise TypeError("car: argument must be a list")
TypeError: car: argument must be a list

======================================================================
ERROR: test_symbolic_differentiation_workflow (test_integration.TestCompleteWorkflows.test_symbolic_differentiation_workflow)
Test complete differentiation workflow.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_integration.py", line 125, in test_symbolic_differentiation_workflow
    simplified = deriv_expr.with_rules(deriv_rules_fixed).simplify()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/fluent_api.py", line 262, in simplify
    result = rewrite_fn(self.expr)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 479, in wrapper
    return simplify_exp(exp, is_root=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 383, in simplify_exp
    result = simplify_parts(exp)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 402, in simplify_parts
    return cons(simplify_exp(car(exp)), simplify_parts(cdr(exp)))
                                        ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 402, in simplify_parts
    return cons(simplify_exp(car(exp)), simplify_parts(cdr(exp)))
                ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 383, in simplify_exp
    result = simplify_parts(exp)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 402, in simplify_parts
    return cons(simplify_exp(car(exp)), simplify_parts(cdr(exp)))
                                        ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 402, in simplify_parts
    return cons(simplify_exp(car(exp)), simplify_parts(cdr(exp)))
                ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 457, in scan
    dict_ = match(pat, exp, empty_dictionary())
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 268, in match
    submatch = match(car(pat), car(exp), dict_)
                               ^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 40, in car
    raise TypeError("car: argument must be a list")
TypeError: car: argument must be a list

======================================================================
ERROR: test_symbolic_to_numeric_workflow (test_integration.TestCompleteWorkflows.test_symbolic_to_numeric_workflow)
Test symbolic manipulation followed by numeric evaluation.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_integration.py", line 183, in test_symbolic_to_numeric_workflow
    expanded = expr.with_rules([expansion_rule]).simplify()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/fluent_api.py", line 262, in simplify
    result = rewrite_fn(self.expr)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 479, in wrapper
    return simplify_exp(exp, is_root=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 457, in scan
    dict_ = match(pat, exp, empty_dictionary())
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 269, in match
    return match(cdr(pat), cdr(exp), submatch)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 268, in match
    submatch = match(car(pat), car(exp), dict_)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 268, in match
    submatch = match(car(pat), car(exp), dict_)
                               ^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 40, in car
    raise TypeError("car: argument must be a list")
TypeError: car: argument must be a list

======================================================================
ERROR: test_rule_application_errors (test_integration.TestErrorHandling.test_rule_application_errors)
Test rule application with invalid rules.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_integration.py", line 365, in test_rule_application_errors
    expr.with_rules([[["+", "x", 1]]]).simplify()
  File "/home/spinoza/github/xtk/src/xtk/fluent_api.py", line 262, in simplify
    result = rewrite_fn(self.expr)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 479, in wrapper
    return simplify_exp(exp, is_root=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 455, in scan
    skel = skeleton(rule)
           ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 179, in skeleton
    return car(cdr(rule))
           ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 42, in car
    raise ValueError("car: argument is an empty list")
ValueError: car: argument is an empty list

======================================================================
ERROR: test_match_empty_lists (test_rewriter_comprehensive.TestPatternMatching.test_match_empty_lists)
Test matching empty lists.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_rewriter_comprehensive.py", line 275, in test_match_empty_lists
    result = match([1], [], empty_dictionary())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 268, in match
    submatch = match(car(pat), car(exp), dict_)
                               ^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 42, in car
    raise ValueError("car: argument is an empty list")
ValueError: car: argument is an empty list

======================================================================
ERROR: test_simplify_with_empty_expression (test_simplifier.TestSimplifierFixed.test_simplify_with_empty_expression)
Test simplifier with an empty expression.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_simplifier.py", line 152, in test_simplify_with_empty_expression
    result = simplify(expression)
             ^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 479, in wrapper
    return simplify_exp(exp, is_root=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 369, in simplify_exp
    result = try_rules(exp)
             ^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 475, in try_rules
    return scan(the_rules)
           ^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 457, in scan
    dict_ = match(pat, exp, empty_dictionary())
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 268, in match
    submatch = match(car(pat), car(exp), dict_)
                               ^^^^^^^^
  File "/home/spinoza/github/xtk/src/xtk/rewriter.py", line 42, in car
    raise ValueError("car: argument is an empty list")
ValueError: car: argument is an empty list

======================================================================
FAIL: test_complete_commands (test_cli.TestXTKReplComplete.test_complete_commands)
Test command completion.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 54, in test_complete_commands
    self.assertIn(result2, ['exit', 'expand'])
AssertionError: 'explain' not found in ['exit', 'expand']

======================================================================
FAIL: test_list_rules_with_rules (test_cli.TestXTKReplMethods.test_list_rules_with_rules)
Test list_rules with rules.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 345, in test_list_rules_with_rules
    self.assertIn('1', call_args)
AssertionError: '1' not found in '[call(<rich.table.Table object at 0x7f7568b6fa90>)]'

======================================================================
FAIL: test_process_command_help (test_cli.TestXTKReplProcessing.test_process_command_help)
Test help command.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 188, in test_process_command_help
    self.assertTrue(any('Available Commands' in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_process_command_history (test_cli.TestXTKReplProcessing.test_process_command_history)
Test history command.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 206, in test_process_command_history
    self.assertTrue(any('[0]' in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_process_command_line (test_cli.TestXTKReplProcessing.test_process_command_line)
Test processing command lines starting with ':'.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 160, in test_process_command_line
    mock_process_command.assert_called_once_with('help')
  File "/usr/lib/python3.11/unittest/mock.py", line 944, in assert_called_once_with
    raise AssertionError(msg)
AssertionError: Expected 'process_command' to be called once. Called 0 times.

======================================================================
FAIL: test_process_command_vars (test_cli.TestXTKReplProcessing.test_process_command_vars)
Test vars command.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 217, in test_process_command_vars
    self.assertTrue(any('x =' in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_process_sexpr (test_cli.TestXTKReplProcessing.test_process_sexpr)
Test processing S-expressions.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 179, in test_process_sexpr
    self.assertTrue(any('Parsed' in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_run_eof_error (test_cli.TestXTKReplRun.test_run_eof_error)
Test REPL handles EOFError.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 143, in test_run_eof_error
    self.assertTrue(any('Goodbye' in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_run_exit_command (test_cli.TestXTKReplRun.test_run_exit_command)
Test REPL quits on 'exit' command.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 117, in test_run_exit_command
    self.assertTrue(any('Goodbye' in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_run_keyboard_interrupt (test_cli.TestXTKReplRun.test_run_keyboard_interrupt)
Test REPL handles KeyboardInterrupt.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 134, in test_run_keyboard_interrupt
    self.assertTrue(any("Use 'quit'" in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_run_quit_command (test_cli.TestXTKReplRun.test_run_quit_command)
Test REPL quits on 'quit' command.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.11/unittest/mock.py", line 1369, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/spinoza/github/xtk/tests/test_cli.py", line 107, in test_run_quit_command
    self.assertTrue(any('Welcome' in call for call in calls))
AssertionError: False is not true

======================================================================
FAIL: test_evaluate_expression_with_missing_variable (test_evaluate.TestEvaluate.test_evaluate_expression_with_missing_variable)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_evaluate.py", line 78, in test_evaluate_expression_with_missing_variable
    with self.assertRaises(Exception):
AssertionError: Exception not raised

======================================================================
FAIL: test_empty_expression (test_fluent_api.TestEdgeCasesFluentAPI.test_empty_expression)
Test empty expression handling.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_fluent_api.py", line 408, in test_empty_expression
    self.assertEqual(expr.to_latex(), "()")
AssertionError: '[]' != '()'
- []
+ ()


======================================================================
FAIL: test_differentiate (test_fluent_api.TestExpression.test_differentiate)
Test differentiation.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_fluent_api.py", line 247, in test_differentiate
    self.assertEqual(result.expr[0], 'dd')
AssertionError: '*' != 'dd'
- *
+ dd


======================================================================
FAIL: test_symbolic_to_numeric_workflow (test_fluent_api.TestIntegrationFluentAPI.test_symbolic_to_numeric_workflow)
Test symbolic to numeric evaluation.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_fluent_api.py", line 542, in test_symbolic_to_numeric_workflow
    self.assertEqual(result.expr, 16)
AssertionError: ['+', Expression(['*', 'x', 'x']), Expression(['*', 2, 'x']), 1] != 16

======================================================================
FAIL: test_match_with_callable (test_rewriter_comprehensive.TestErrorConditions.test_match_with_callable)
Test that callables in expressions are handled.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/spinoza/github/xtk/tests/test_rewriter_comprehensive.py", line 495, in test_match_with_callable
    self.assertEqual(result, "failed")
AssertionError: [['x', <function TestErrorConditions.test[50 chars]80>]] != 'failed'

----------------------------------------------------------------------
Ran 358 tests in 0.473s

FAILED (failures=16, errors=10, skipped=9)
